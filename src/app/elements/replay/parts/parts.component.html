<div class="replay-container">
  <!-- 信息栏 -->
  <div class="info-header" *ngIf="currentVideo">
    <div class="info-item" *ngIf="replay?.user">
      <span class="label">{{ 'user' | translate }}:</span>
      <span class="value">{{ currentVideo?.user }}</span>
    </div>
    <div class="info-item" *ngIf="replay?.asset">
      <span class="label">{{ 'asset' | translate }}:</span>
      <span class="value">{{ currentVideo?.asset }}</span>
    </div>
    <div class="info-item" *ngIf="currentVideo?.system_user">
      <span class="label">{{ 'system user' | translate }}:</span>
      <span class="value">{{ currentVideo?.system_user }}</span>
    </div>
    <div class="info-item" *ngIf="currentVideo?.date_start">
      <span class="label">{{ 'start time' | translate }}:</span>
      <span class="value">{{ startTime }}</span>
    </div>
    <div class="info-actions">
      <a *ngIf="currentVideo?.download_url" [href]="currentVideo?.download_url" class="download-link">
        {{ 'Download' | translate }}
      </a>
    </div>
  </div>

  <!-- 主体内容 -->
  <div class="main-content">
    <!-- 视频播放区 -->
    <div class="video-area">
      <div class="loading-overlay" *ngIf="videoLoading">
        <nz-spin nzSize="large"></nz-spin>
      </div>
      <elements-replay-guacamole
        *ngIf="currentVideo && currentVideo.src"
        [replay]="currentVideo"
        class="video-player">
      </elements-replay-guacamole>
    </div>

    <!-- 播放列表 -->
    <div class="playlist-area">
      <div class="playlist-header">
        <h3>{{ 'Play List' | translate }}</h3>
        <span class="count">({{ folders?.length || 0 }})</span>
      </div>
      <div class="playlist-content">
        <div class="loading-overlay" *ngIf="alertShown">
          <nz-spin nzSize="default"></nz-spin>
        </div>
        <div class="playlist-items" *ngIf="!alertShown">
          <div class="playlist-item"
               *ngFor="let folder of folders"
               [class.active]="currentVideo?.name === folder?.name"
               (click)="selectPart(folder)"
               [title]="folder.name">
            <div class="item-icon">
              <i nz-icon [nzType]="currentVideo?.name === folder?.name ? 'pause-circle' : 'play-circle'"></i>
            </div>
            <div class="item-info">
              <div class="item-name">{{ folder.name }}</div>
              <div class="item-meta" *ngIf="folder.updated || folder.size">
                <span *ngIf="folder.updated">{{ folder.updated }}</span>
                <span *ngIf="folder.size" class="size">{{ folder.size }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
